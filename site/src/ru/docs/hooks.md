---
title: "Хуки"
tags: 
date: "2025.08.12 18:54"
id: b9cc5c7eee2ed604a95e22bedf621fed
doc: hooks_ru
excerpt: |-
  Хуки позволяют запускать произвольные скрипты во время генерации сайта. 
  Их можно писать на любом языке.
---

Хуки — это скрипты, которые автоматически запускаются в определенные моменты генерации.
С их помощью можно, например, скачивать внешний контент, обрабатывать результирующие файлы и так далее.

## Настройка

Для использования хуков в [директории сайта](/+doc:site_dir_ru) нужно создать поддиректорию `hooks`, в которую нужно положить соответвующие скрипты.

При запуске хука в первую очередь будут запущены файлы из директории `hooks` с именем, соответствующим имени хука, независимо от расширения, затем файлы
из директории `hooks/<имя хука>.d` в алфавитном порядке. Скрипты могут быть написаны на любом языке. 

Рабочей директорией скрипта будет 
директория сайта, дополнительная информация (см. ниже) будет передана на стандартный ввод. Вывод хуков буферизуется и выводится после завершения.

## Доступные хуки

### before

Запускается перед генерацией. 

### after

Запускается после завершения генерации, на стандартный ввод получает выходную директорию. 
В node можно использовать так:

```js
// hooks/after/myhook.js
process.stdio.on("data" , 
(d)=>{
  let output_dir = d.toString(); 
  // do stuff
})

```

Или в скрипте оболочки:

```bash
# hooks/after/myhook.sh
read OUTDIR
cd $OUTDIR
# do stuff
```



